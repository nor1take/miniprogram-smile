<return top="{{top}}" bottom="{{bottom}}" color="white" topWord="AI"></return>
<wxs src="../../../util/filter.wxs" module="filter" />

<view style="width: 100%; height: 100%; position: absolute;">
  <view style="height: 100%; margin: 32rpx; display: flex; flex-direction: column;">
    <!-- <i class="iconfont icon-a-logo_white74c0b874" style="font-size: 100rpx; color: white;"></i> -->
    <i class="iconfont icon-a-logo_alphadeab58a2" style="font-size: 100rpx; color: white;"></i>

    <text class="body" style="margin: 0;">
      本小程序使用的问答、多轮对话和代码生成功能的中英双语模型是 ChatGLM。

      ChatGLM 是清华大学KEG实验室和智谱AI公司于 2023 年共同训练的语言模型。

      提问 ChatGLM：5 次/天

      * 支持多轮对话。在评论区追问前，请确保评论输入框右侧 LOGO 为点亮状态。
    </text>
  </view>

  <view class="hotLabel">最新提问</view>

  <view class="background" wx:for="{{newPostList}}" wx:key="_id">
    <view>
      <view class="last">{{filter.timeString(item.time)}}</view>
      <view class="body gptComment ask">
        <view style="width: 55rpx; height: 55rpx; border-radius: 10rpx; ">
          <image style="width: 100%; height: 100%; border-radius: 10rpx;" src="{{item.avatarUrl}}"></image>
        </view>
        <text class="commentBody">{{item.title}}</text>
      </view>

      <view wx:if="{{item.commenter[0].completion}}" class="body gptComment answer" style="display: flex;" bindtap="beWatched" id="{{item._id}}">
        <i class="iconfont icon-AI"></i>
        <text wx:if="{{item.commenter[0].completion.length > 75}}" class="commentBody" style="padding-top: 16rpx;" user-select="{{true}}">{{filter.abbreviation(item.commenter[0].completion)}}\n\n[点击查看完整回答]</text>
        <text wx:else="" class="commentBody" style="padding-top: 16rpx;" user-select="{{true}}">{{item.commenter[0].completion}}</text>
      </view>
    </view>
  </view>
  <view class="last" style="display: flex; justify-content: center; align-items: center;">仅展示前 20 条</view>
  <view style="width: 100%; height: 500rpx;"></view>


  <view class="gptBG background" style="bottom: {{keyboardHeight}}px;">
    <i wx:if="{{glm}}" class="iconfont icon-chatglm" style="font-size: 60rpx; color: white;" bindtap="changeAPI"></i>
    <image wx:else="" src="cloud://smile-9gkoqi8o7618f34a.736d-smile-9gkoqi8o7618f34a-1316903232/646708c1-78c1749e-2e010e69" mode="widthFix" style="width: 120rpx; height: 120rpx;" bindtap="changeAPI"></image>
    <!-- <i wx:else="" class="iconfont icon-AI" style="font-size: 60rpx; color: white;" bindtap="changeAPI"></i> -->
    <block wx:if="{{isTesting}}">
      <textarea class="gptInput" placeholder-style="color:white;" maxlength="300" placeholder="此处输入你的问题 :)" auto-height adjust-position="{{false}}" show-confirm-bar="{{false}}" bindkeyboardheightchange="focus" bindblur="loseFocus" bindinput="input" value="{{inputValue}}"></textarea>
      <i class="iconfont icon-ic_public_email_send" style="font-size: 60rpx; color: white;" bindtap="send"></i>
    </block>
    <block wx:else="">
      <textarea class="gptInput" placeholder-style="color:white" disabled placeholder="{{testMsg}}" auto-height adjust-position="{{false}}" show-confirm-bar="{{false}}"></textarea>
    </block>
  </view>

</view>